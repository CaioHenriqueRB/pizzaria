<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pizza Margherita - Pizzaria Del√≠cia</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Pizzaria Del√≠cia</h1>
        <nav>
            <ul>
                <li><a href="index.html">Inicio</a></li>
                <li><a href="index.html#pizzas">Pizzas</a></li>
                <li><a href="index.html#pizzas-doces">Pizzas Doces</a></li>
                <li><a href="index.html#petiscos-porcoes">Petiscos e Por√ß√µes</a></li>
                <li><a href="index.html#drinks">Drinks</a></li>
                <li><a href="index.html#sucos-bebidas">Sucos e Bebidas</a></li>
            </ul>
        </nav>
    </header>
    
    <main>
        <div class="item-page">
            <div class="item-details">
                <h2>Pizza Margherita</h2>
                <img src="C:\Users\henri\Desktop\pizzaria\pizzaria2\imagens\imgs-pizzas\margherita.png" alt="Pizza Margherita">
                <p>Molho de tomate, mussarela, manjeric√£o fresco e azeite de oliva.</p>
                
                <!-- Escolha do tamanho -->
                <form id="pizza-options-form">
                    <fieldset>
                        <legend>Escolher tamanho</legend>
                        <label>
                            <input type="radio" name="size" value="Brotinho" data-price="22.00">
                            Brotinho - R$ 22,00
                        </label><br>
                        <label>
                            <input type="radio" name="size" value="M√©dia" data-price="25.00">
                            M√©dia - R$ 25,00
                        </label><br>
                        <label>
                            <input type="radio" name="size" value="Grande" data-price="29.00">
                            Grande - R$ 29,00
                        </label><br>
                        <label>
                            <input type="radio" name="size" value="Fam√≠lia" data-price="34.00">
                            Fam√≠lia - R$ 34,00
                        </label>
                    </fieldset>
                    <fieldset>
                        <legend>Escolher tipo</legend>
                        <label>
                            <input type="radio" name="type" value="Inteira" checked>
                            Pizza Inteira
                        </label><br>
                        <label>
                            <input type="radio" name="type" value="Meia">
                            Meia Pizza
                        </label>
                    </fieldset>
                </form>

                <div class="quantity-controls">
                    <button type="button" onclick="decreaseQuantity()">-</button>
                    <div class="quantity-box">
                        <span id="quantity">1</span>
                    </div>
                    <button type="button" onclick="increaseQuantity()">+</button>
                </div>
                <div class="observation">
                    <label for="observation">Observa√ß√£o:</label>
                    <textarea id="observation" name="observation" rows="4" cols="50"></textarea>
                </div>
                <div class="buttons">
                    <button class="go-back-btn" onclick="goBack()">‚á¶ Voltar</button>
                    <button class="add-to-cart-btn" onclick="addToCart()">üõí Adicionar</button>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; 2024 Pizzaria Del√≠cia. Todos os direitos reservados.</p>
    </footer>

    <script>
        function increaseQuantity() {
            var quantity = document.getElementById('quantity');
            var value = parseInt(quantity.innerText);
            quantity.innerText = value + 1;
        }

        function decreaseQuantity() {
            var quantity = document.getElementById('quantity');
            var value = parseInt(quantity.innerText);
            if (value > 1) {
                quantity.innerText = value - 1;
            }
        }

        function addToCart() {
            const form = document.getElementById('pizza-options-form');
            const sizeElement = form.elements['size'];
            const sizeRadio = sizeElement ? sizeElement.querySelector('input[name="size"]:checked') : null;
            const size = sizeRadio ? sizeRadio.value : 'M√©dia'; // Default to M√©dia if no size is selected
            const sizePrice = sizeRadio ? parseFloat(sizeRadio.getAttribute('data-price')) : 25.00; // Default price for M√©dia

            const typeElement = form.elements['type'];
            const typeRadio = typeElement ? typeElement.querySelector('input[name="type"]:checked') : null;
            const type = typeRadio ? typeRadio.value : 'Inteira'; // Default to Inteira if no type is selected

            const itemName = 'Pizza Margherita - ' + size + ' (' + type + ')';
            const quantity = parseInt(document.getElementById('quantity').innerText);
            const observation = document.getElementById('observation').value;

            // Calcular o pre√ßo total do item
            const totalPrice = sizePrice * quantity;

            // Obter carrinho do localStorage ou criar um novo array vazio
            var cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];

            // Adicionar novo item ao carrinho
            cartItems.push({
                name: itemName,
                observation: observation,
                quantity: quantity,
                price: sizePrice, // Salvar o pre√ßo unit√°rio
                totalPrice: totalPrice // Salvar o pre√ßo total do item (quantidade * pre√ßo unit√°rio)
            });

            // Atualizar o pre√ßo total do carrinho no localStorage
            var totalCartPrice = parseFloat(localStorage.getItem('totalPrice')) || 0;
            totalCartPrice += totalPrice;
            localStorage.setItem('totalPrice', totalCartPrice.toFixed(2));

            // Salvar carrinho atualizado no localStorage
            localStorage.setItem('cartItems', JSON.stringify(cartItems));

            // Se o tipo for "Meia", redirecionar para o card√°pio para escolher a outra metade
            if (type === 'Meia') {
                alert("Voc√™ escolheu meia pizza. Escolha a outra metade no card√°pio.");
                window.location.href = 'index.html#pizzas';
            } else {
                // Redirecionar para a p√°gina do carrinho
                window.location.href = 'carrinho.html';
            }
        }

        function goBack() {
            window.history.back();
        }
    </script>
</body>
</html>
